<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYP Practice Test - Mithila Education and Welfare Society</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%, #f093fb 100%);
            min-height: 100vh;
            color: #333;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="grad1"><stop offset="0%" stop-color="rgba(255,255,255,0.1)"/><stop offset="100%" stop-color="rgba(255,255,255,0)"/></radialGradient></defs><circle cx="200" cy="300" r="100" fill="url(%23grad1)"><animate attributeName="cx" values="200;800;200" dur="20s" repeatCount="indefinite"/></circle><circle cx="800" cy="200" r="150" fill="url(%23grad1)"><animate attributeName="cy" values="200;700;200" dur="15s" repeatCount="indefinite"/></circle><circle cx="400" cy="600" r="80" fill="url(%23grad1)"><animate attributeName="r" values="80;120;80" dur="10s" repeatCount="indefinite"/></circle></svg>');
            pointer-events: none;
            z-index: -1;
        }

        /* Floating Elements */
        .floating-element {
            position: absolute;
            pointer-events: none;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .floating-element:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .floating-element:nth-child(2) { top: 20%; right: 10%; animation-delay: 2s; }
        .floating-element:nth-child(3) { bottom: 20%; left: 20%; animation-delay: 4s; }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            animation: slideInDown 1s ease-out;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        @keyframes slideInDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .company-logo {
            width: 100px;
            height: 100px;
            animation: logoFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #007bff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 3px solid white;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .company-logo::before {
            content: 'MEWS';
            color: white;
            font-weight: bold;
            font-size: 16px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            z-index: 2;
        }

        .company-logo::after {
            content: '';
            position: absolute;
            top: 15%;
            left: 15%;
            width: 70%;
            height: 70%;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: logoSpin 10s linear infinite;
        }

        @keyframes logoSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .company-logo img {
            display: none; /* Hide the problematic image */
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }

        .header-text {
            text-align: left;
            flex: 1;
            min-width: 300px;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            .header-text {
                text-align: center;
            }
        }

        .language-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-selector select {
            padding: 8px 12px;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: white;
            color: #333;
            font-size: 14px;
            cursor: pointer;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header h2 {
            color: #3498db;
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .header h3 {
            color: #e74c3c;
            font-size: 1.4em;
            font-weight: 600;
        }

        .main-content {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #666;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .student-form {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            position: relative;
            animation: slideInUp 0.8s ease-out;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        @keyframes slideInUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
            animation: fadeInLeft 0.6s ease-out;
        }

        .form-group:nth-child(even) {
            animation: fadeInRight 0.6s ease-out;
        }

        @keyframes fadeInLeft {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeInRight {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 16px;
            position: relative;
            transition: all 0.3s ease;
        }

        .form-group:hover label {
            color: #667eea;
            transform: translateX(5px);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            position: relative;
            outline: none;
        }

        .form-group input::placeholder {
            color: #a0a0a0;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 1);
        }

        .form-group input:focus::placeholder {
            color: #667eea;
            transform: translateX(10px);
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 35px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            animation: buttonGlow 2s ease-in-out infinite alternate;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        @keyframes buttonGlow {
            0% { box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3); }
            100% { box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5); }
        }

        @keyframes titleGlow {
            0%, 100% { text-shadow: 0 0 10px rgba(102, 126, 234, 0.5); }
            50% { text-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 0 0 30px rgba(118, 75, 162, 0.6); }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Floating Icons Animation */
        .floating-icons {
            position: absolute;
            font-size: 2em;
            opacity: 0.1;
            animation: floatAround 8s linear infinite;
        }

        @keyframes floatAround {
            0% { transform: translateX(0) translateY(0) rotate(0deg); }
            25% { transform: translateX(100px) translateY(-50px) rotate(90deg); }
            50% { transform: translateX(50px) translateY(-100px) rotate(180deg); }
            75% { transform: translateX(-50px) translateY(-50px) rotate(270deg); }
            100% { transform: translateX(0) translateY(0) rotate(360deg); }
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60, #229954);
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }

        .exam-container {
            display: none;
        }

        .exam-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .timer {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 18px;
        }

        .fullscreen-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            display: none;
        }

        .fullscreen-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .fullscreen-toggle:active {
            transform: translateY(0);
        }

        .fullscreen-toggle.show {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fullscreen-toggle svg {
            width: 18px;
            height: 18px;
            fill: white;
        }

        .exam-info {
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .progress {
            background: #ecf0f1;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar {
            background: linear-gradient(135deg, #3498db, #2980b9);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            animation: questionSlideIn 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            animation: progressGlow 2s ease-in-out infinite;
        }

        @keyframes questionSlideIn {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes progressGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Animated Options */
        .option {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px 20px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            opacity: 1 !important;
            visibility: visible !important;
            display: flex !important;
            align-items: center;
            gap: 10px;
        }



        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s;
        }

        .option:hover {
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
            background: rgba(102, 126, 234, 0.05);
        }

        .option:hover::before {
            left: 100%;
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        /* Animated Timer */
        .timer {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 18px;
            animation: timerPulse 2s ease-in-out infinite;
            box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3);
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 10px 25px rgba(231, 76, 60, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 15px 35px rgba(231, 76, 60, 0.5); }
        }

        /* KBC Style Animations */
        @keyframes kbcQuestionFadeIn {
            0% { 
                opacity: 0; 
                transform: scale(0.8) translateY(-30px);
            }
            100% { 
                opacity: 1; 
                transform: scale(1) translateY(0);
            }
        }

        @keyframes kbcOptionSlideIn {
            0% { 
                opacity: 0; 
                transform: translateX(-100px);
            }
            100% { 
                opacity: 1; 
                transform: translateX(0);
            }
        }

        @keyframes kbcOptionGlow {
            0%, 100% { 
                box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
            }
            50% { 
                box-shadow: 0 8px 25px rgba(52, 152, 219, 0.6);
            }
        }

        @keyframes kbcSelectedPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 8px 25px rgba(243, 156, 18, 0.5);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 12px 35px rgba(243, 156, 18, 0.7);
            }
        }

        .kbc-question-animate {
            animation: kbcQuestionFadeIn 0.8s ease-out forwards;
        }

        .kbc-option-animate {
            animation: kbcOptionSlideIn 0.6s ease-out forwards;
        }

        /* Hover effect - sirf glow, no transform to avoid disappearing */
        .kbc-option-animate:hover:not(.option-correct):not(.option-wrong) {
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.6) !important;
            border-color: #3498db !important;
            background: rgba(52, 152, 219, 0.05) !important;
        }

        .kbc-option-selected {
            animation: kbcSelectedPulse 1s ease-in-out infinite !important;
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%) !important;
            color: white !important;
            border-color: #e67e22 !important;
        }
        
        .kbc-option-selected:hover {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%) !important;
        }

        /* Correct/Wrong Answer Styles */
        .option-correct {
            animation: correctPulse 0.8s ease-out forwards !important;
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%) !important;
            color: white !important;
            border: 3px solid #27ae60 !important;
            font-weight: bold;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .option-wrong {
            animation: wrongShake 0.6s ease-out forwards !important;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%) !important;
            color: white !important;
            border: 3px solid #c0392b !important;
            font-weight: bold;
            opacity: 1 !important;
            visibility: visible !important;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); opacity: 1; }
            25% { transform: scale(1.05); box-shadow: 0 15px 40px rgba(46, 204, 113, 0.8); opacity: 1; }
            50% { transform: scale(1); opacity: 1; }
            75% { transform: scale(1.03); opacity: 1; }
            100% { transform: scale(1); box-shadow: 0 10px 30px rgba(46, 204, 113, 0.6); opacity: 1; }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); opacity: 1; }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); opacity: 1; }
            20%, 40%, 60%, 80% { transform: translateX(5px); opacity: 1; }
        }

        /* Lock Button */
        .lock-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .lock-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.5);
        }

        .lock-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .lock-btn.locked {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            box-shadow: 0 5px 15px rgba(149, 165, 166, 0.3);
        }

        /* KBC Style Popup Messages */
        .kbc-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 60px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 10000;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            animation: popupBounceIn 0.6s ease-out forwards;
        }

        .kbc-popup.correct {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }

        .kbc-popup.wrong {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .kbc-popup-icon {
            font-size: 60px;
            margin-bottom: 20px;
            animation: iconBounce 0.8s ease-out;
        }

        @keyframes popupBounceIn {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1) rotate(10deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
        }

        @keyframes iconBounce {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.3) rotate(-10deg); }
            50% { transform: scale(0.9) rotate(10deg); }
            75% { transform: scale(1.2) rotate(-5deg); }
        }

        .kbc-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Flash Animation for Correct Answer */
        @keyframes flashGreen {
            0%, 100% { 
                background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
                box-shadow: 0 10px 30px rgba(46, 204, 113, 0.8);
            }
            50% { 
                background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
                box-shadow: 0 15px 40px rgba(241, 196, 15, 0.9);
                transform: scale(1.05);
            }
        }

        /* Loading Animation */
        .loading {
            text-align: center;
            padding: 50px;
            animation: loadingBounce 1.5s ease-in-out infinite;
        }

        @keyframes loadingBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Enhanced Loading Spinner */
        .spinner-container {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 30px auto;
        }

        .spinner-ring {
            position: absolute;
            border: 4px solid transparent;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        .spinner-ring:nth-child(1) {
            width: 120px;
            height: 120px;
            border-top-color: #667eea;
            animation-duration: 2s;
        }

        .spinner-ring:nth-child(2) {
            width: 90px;
            height: 90px;
            top: 15px;
            left: 15px;
            border-right-color: #764ba2;
            animation-duration: 1.5s;
            animation-direction: reverse;
        }

        .spinner-ring:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 30px;
            left: 30px;
            border-bottom-color: #f093fb;
            animation-duration: 1s;
        }

        .loading-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            animation: bounce 1s ease-in-out infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .question-number {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            display: inline-block;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .question-text {
            font-size: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            font-weight: 500;
            color: #2c3e50;
        }

        .options {
            margin-bottom: 25px;
        }

        .option {
            margin: 15px 0;
            padding: 15px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            font-size: 16px;
        }

        .option:hover {
            border-color: #3498db;
            background: #ecf0f1;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #3498db;
            background: #d5dbdb;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);
        }

        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-counter {
            background: #f8f9fa;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            border: 2px solid #e9ecef;
        }

        .result-container {
            display: none;
            text-align: center;
        }

        .score-card {
            background: linear-gradient(135deg, #27ae60, #229954);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .score {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .score-label {
            font-size: 1.5em;
        }

        .percentage {
            font-size: 2em;
            font-weight: 600;
            margin-top: 10px;
        }

        .result-details {
            text-align: left;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .answer-review {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: white;
        }

        .answer-item {
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid;
        }

        .answer-item.correct {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .answer-item.incorrect {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .answer-item.unanswered {
            background: #fff3cd;
            border-left-color: #ffc107;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #f5c6cb;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .exam-header {
                flex-direction: column;
                text-align: center;
            }
            
            .navigation {
                flex-direction: column;
                gap: 15px;
            }
            
            .score {
                font-size: 2.5em;
            }
        }

        @media print {
            body {
                background: white !important;
            }
            
            .btn, .navigation, .timer {
                display: none !important;
            }
            
            .main-content {
                box-shadow: none;
                padding: 20px 0;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Elements for Animation -->
    <div class="floating-icons" style="top: 10%; left: 5%; animation-delay: 0s;">üíª</div>
    <div class="floating-icons" style="top: 20%; right: 10%; animation-delay: 2s;">üìö</div>
    <div class="floating-icons" style="bottom: 30%; left: 8%; animation-delay: 4s;">üéØ</div>
    <div class="floating-icons" style="bottom: 15%; right: 15%; animation-delay: 6s;">üöÄ</div>
    <div class="floating-icons" style="top: 40%; left: 3%; animation-delay: 1s;">‚≠ê</div>
    <div class="floating-icons" style="top: 60%; right: 5%; animation-delay: 3s;">üèÜ</div>

    <div class="container">
        <div class="header">
            <div class="language-selector">
                <label for="languageSelect" style="color: #2c3e50; font-weight: 600; font-size: 11px;">‡§≠‡§æ‡§∑‡§æ/Language:</label>
                <select id="languageSelect" onchange="changeLanguage()" style="font-size: 12px; padding: 4px 8px;">
                    <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                    <option value="en">English</option>
                </select>
            </div>
            <div class="header-content">
                <div class="company-logo">
                    <img src="data:image/png;base64,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" alt="MEWS Logo" />
                </div>
                
                <div class="header-text">
                    <h1 style="background: linear-gradient(135deg, #667eea, #764ba2); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: titleGlow 3s ease-in-out infinite; margin-bottom: 10px; text-align: center;">Mithila Education and Welfare Society</h1>
                    <h2 style="color: #667eea; animation: slideInLeft 1s ease-out; margin-bottom: 8px; text-align: center;">Kushal Yuva Program</h2>
                    <h3 id="examTitle" style="color: #764ba2; animation: slideInRight 1s ease-out; text-align: center;">Practice Test Exam</h3>
                </div>
                
                <!-- Developer Credit in Header -->
                <div style="position: absolute; bottom: 15px; right: 20px; background: rgba(255, 255, 255, 0.95); padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(102, 126, 234, 0.3);">
                    <span style="font-size: 11px; color: #666; font-weight: 500;">Developed by</span>
                    <span style="font-size: 12px; color: #667eea; font-weight: bold; margin-left: 5px;">Rajeev K. Thakur</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Loading State -->
            <div id="loadingState" class="loading">
                <div class="spinner-container">
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                    <div class="spinner-ring"></div>
                    <div class="loading-icon">üöÄ</div>
                </div>
                <h3 style="color: #667eea; margin-top: 20px; animation: pulse 1.5s infinite;">Loading KYP Exam System...</h3>
                <p style="color: #764ba2; animation: fadeInOut 2s infinite;">‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ú‡§æ‡§á‡§è ‡§è‡§ï amazing experience ‡§ï‡•á ‡§≤‡§ø‡§è! üåü</p>
            </div>

            <!-- Student Registration Form -->
            <div id="registrationForm" class="student-form hidden">
                <h2 id="studentInfoTitle" style="text-align: center; margin-bottom: 30px; color: #2c3e50;">‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä</h2>
                
                <div id="errorMessage" class="error-message hidden"></div>
                <div id="successMessage" class="success-message hidden"></div>
                
                <form id="studentForm">
                    <div class="form-group">
                        <label for="studentName" id="nameLabel">‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *</label>
                        <input type="text" id="studentName" required placeholder="‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç">
                    </div>
                    
                    <div class="form-group">
                        <label for="studentEmail" id="emailLabel">‡§à‡§Æ‡•á‡§≤ (Email Address) *</label>
                        <input type="email" id="studentEmail" required placeholder="example@email.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="studentMobile" id="mobileLabel">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *</label>
                        <input type="tel" id="studentMobile" required placeholder="10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" pattern="[0-9]{10}">
                    </div>
                    
                    <div class="form-group">
                        <label for="subjectSelect" id="subjectLabel">‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç *</label>
                        <select id="subjectSelect" required>
                            <option value="" id="selectSubjectOption">-- ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="examLanguageSelect" id="examLanguageLabel">‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ *</label>
                        <select id="examLanguageSelect" required>
                            <option value="hi" selected>‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                            <option value="en">English</option>
                        </select>
                        <small style="color: #666; font-size: 12px;" id="examLanguageNote">
                            ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§§‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§π‡•à
                        </small>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button type="submit" class="btn btn-success" id="startExamBtn">
                            ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </div>
                </form>

                <div style="text-align: center; margin-top: 30px; border-top: 1px solid #ddd; padding-top: 20px;">
                    <a href="/admin" class="btn btn-warning">Admin Panel</a>
                </div>
            </div>

            <!-- Fullscreen Toggle Button -->
            <button id="fullscreenToggle" class="fullscreen-toggle" onclick="toggleFullscreen()">
                <svg id="fullscreenIcon" viewBox="0 0 24 24">
                    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                </svg>
                <span id="fullscreenText">Full Screen</span>
            </button>

            <!-- Exam Container -->
            <div id="examContainer" class="exam-container">
                <div class="exam-header">
                    <div class="exam-info">
                        <strong>Subject:</strong> <span id="examSubject"></span><br>
                        <strong>Student:</strong> <span id="examStudentName"></span>
                    </div>
                    <div class="timer" id="examTimer">Time: 00:00</div>
                </div>
                
                <div class="progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div style="text-align: center; margin-bottom: 20px;">
                    <span class="question-counter" id="questionCounter">Question 1 of 1</span>
                </div>
                
                <div id="questionContainer" class="question-card">
                    <!-- Questions will be loaded here -->
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" disabled>
                        ‚Üê <span id="prevBtnText">Previous</span>
                    </button>
                    
                    <div style="text-align: center;">
                        <button class="btn btn-danger" onclick="endExam()" id="endExamBtn" style="margin-right: 10px;">
                            <span id="endExamBtnText">‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</span>
                        </button>
                        <button class="btn btn-success" onclick="submitExam()" id="submitBtn" style="display: none;">
                            <span id="submitBtnText">‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç</span>
                        </button>
                    </div>
                    
                    <button class="btn" onclick="nextQuestion()" id="nextBtn">
                        <span id="nextBtnText">Next</span> ‚Üí
                    </button>
                </div>
            </div>

            <!-- Result Container -->
            <div id="resultContainer" class="result-container">
                <div class="score-card">
                    <div class="score" id="finalScore">0/0</div>
                    <div class="score-label" id="scoreLabel">‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§Ç‡§ï</div>
                    <div class="percentage" id="finalPercentage">0%</div>
                </div>
                
                <div class="result-details">
                    <h3 id="detailedResultsTitle" style="margin-bottom: 20px; text-align: center;">‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ</h3>
                    <div id="answerReview" class="answer-review"></div>
                </div>
                
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-success" onclick="printResult()">
                        <span id="printBtnText">‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç</span>
                    </button>
                    <button class="btn btn-warning" onclick="restartTest()">
                        <span id="newTestBtnText">‡§®‡§Ø‡§æ ‡§ü‡•á‡§∏‡•ç‡§ü ‡§≤‡•á‡§Ç</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentQuestionIndex = 0;
        let questions = [];
        let userAnswers = {};
        let examStartTime = null;
        let examTimer = null;
        let subjects = [];
        let currentStudent = null;
        let currentSubject = null;
        let studentId = null;
        let selectedOption = null; // Currently selected option (before lock)
        let isLocked = false; // Whether current question is locked
        
        // Language Support
        let currentLanguage = 'hi';
        let translations = {};

        // API Base URL
        const API_BASE = window.location.origin + '/api';

        // Language Functions
        async function loadLanguages() {
            console.log('üìù Fetching translations from API...');
            try {
                const response = await fetch(`${API_BASE}/languages`);
                console.log('Response status:', response.status);
                if (!response.ok) throw new Error('Failed to load languages');
                translations = await response.json();
                console.log('‚úÖ Translations loaded:', Object.keys(translations));
                
                // Set default language from localStorage or default to Hindi
                currentLanguage = localStorage.getItem('preferredLanguage') || 'hi';
                console.log('Current language set to:', currentLanguage);
                
                const langSelect = document.getElementById('languageSelect');
                if (langSelect) {
                    langSelect.value = currentLanguage;
                    console.log('‚úÖ Language select updated to:', currentLanguage);
                } else {
                    console.warn('‚ö†Ô∏è Language select element not found');
                }
            } catch (error) {
                console.error('‚ùå Language loading error:', error);
                console.error('Error details:', error.message);
                // Fallback - use Hindi as default
                currentLanguage = 'hi';
                console.log('Using fallback language: hi');
            }
        }

        function changeLanguage() {
            const select = document.getElementById('languageSelect');
            currentLanguage = select.value;
            localStorage.setItem('preferredLanguage', currentLanguage);
            updateUILanguage();
        }

        function updateUILanguage() {
            console.log('üåê Updating UI language to:', currentLanguage);
            const t = translations[currentLanguage] || translations['hi'] || {};
            console.log('Translations object:', t);
            
            // Helper function to safely update element
            const updateElement = (id, text) => {
                const elem = document.getElementById(id);
                if (elem) {
                    elem.textContent = text;
                } else {
                    console.warn(`‚ö†Ô∏è Element '${id}' not found`);
                }
            };
            
            // Keep organization name and program name unchanged (only UI elements change)
            // Company/Organization details remain in original language
            updateElement('examTitle', currentLanguage === 'en' ? 'Practice Test Exam' : '‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ');
            
            // Update form labels
            updateElement('studentInfoTitle', t.studentInfo || '‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä');
            updateElement('nameLabel', currentLanguage === 'en' ? 'Full Name *' : '‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ *');
            updateElement('emailLabel', currentLanguage === 'en' ? 'Email Address *' : '‡§à‡§Æ‡•á‡§≤ (Email Address) *');
            updateElement('mobileLabel', currentLanguage === 'en' ? 'Mobile Number *' : '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ *');
            updateElement('subjectLabel', currentLanguage === 'en' ? 'Select Subject *' : '‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç *');
            updateElement('selectSubjectOption', currentLanguage === 'en' ? '-- Please select subject --' : '-- ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç --');
            updateElement('startExamBtn', currentLanguage === 'en' ? 'Start Exam' : '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç');
            updateElement('examLanguageLabel', currentLanguage === 'en' ? 'Exam Language *' : '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ *');
            updateElement('examLanguageNote', currentLanguage === 'en' 
                ? 'This is only for questions and answers language'
                : '‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§â‡§§‡•ç‡§§‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§π‡•à');
            
            // Update placeholders
            const studentName = document.getElementById('studentName');
            if (studentName) {
                studentName.placeholder = currentLanguage === 'en' 
                    ? 'Enter your full name' 
                    : '‡§Ö‡§™‡§®‡§æ ‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç';
            }
            
            const studentMobile = document.getElementById('studentMobile');
            if (studentMobile) {
                studentMobile.placeholder = currentLanguage === 'en' 
                    ? '10-digit mobile number' 
                    : '10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞';
            }
                
            // Update navigation buttons if they exist
            const prevBtnText = document.getElementById('prevBtnText');
            if (prevBtnText) {
                prevBtnText.textContent = currentLanguage === 'en' ? 'Previous' : '‡§™‡§ø‡§õ‡§≤‡§æ';
            }
            
            const endExamBtnText = document.getElementById('endExamBtnText');
            if (endExamBtnText) {
                endExamBtnText.textContent = currentLanguage === 'en' ? 'End Exam' : '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç';
            }
            
            const submitBtnText = document.getElementById('submitBtnText');
            if (submitBtnText) {
                submitBtnText.textContent = currentLanguage === 'en' ? 'Submit Exam' : '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç';
            }
            
            const nextBtnText = document.getElementById('nextBtnText');
            if (nextBtnText) {
                nextBtnText.textContent = currentLanguage === 'en' ? 'Next' : '‡§Ö‡§ó‡§≤‡§æ';
            }
            
            // Update results section if visible
            const scoreLabel = document.getElementById('scoreLabel');
            if (scoreLabel) {
                scoreLabel.textContent = currentLanguage === 'en' ? 'Your Score' : '‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§Ç‡§ï';
            }
            
            const detailedResultsTitle = document.getElementById('detailedResultsTitle');
            if (detailedResultsTitle) {
                detailedResultsTitle.textContent = currentLanguage === 'en' ? 'Detailed Results' : '‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ';
            }
            
            const printBtnText = document.getElementById('printBtnText');
            if (printBtnText) {
                printBtnText.textContent = currentLanguage === 'en' ? 'Print Result' : '‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§ï‡§∞‡•á‡§Ç';
            }
            
            const newTestBtnText = document.getElementById('newTestBtnText');
            if (newTestBtnText) {
                newTestBtnText.textContent = currentLanguage === 'en' ? 'Take New Test' : '‡§®‡§Ø‡§æ ‡§ü‡•á‡§∏‡•ç‡§ü ‡§≤‡•á‡§Ç';
            }
        }

        // Create animated particles effect
        function createParticles() {
            const particlesContainer = document.createElement('div');
            particlesContainer.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: -1;
            `;
            document.body.appendChild(particlesContainer);

            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute;
                    width: 4px;
                    height: 4px;
                    background: rgba(102, 126, 234, 0.3);
                    border-radius: 50%;
                    animation: particleFloat ${5 + Math.random() * 10}s linear infinite;
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    animation-delay: ${Math.random() * 2}s;
                `;
                particlesContainer.appendChild(particle);
            }
        }

        // Add particle animation CSS
        function addParticleCSS() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes particleFloat {
                    0% { transform: translateY(100vh) translateX(0px) rotate(0deg); opacity: 0; }
                    10% { opacity: 1; }
                    90% { opacity: 1; }
                    100% { transform: translateY(-100vh) translateX(${Math.random() * 200 - 100}px) rotate(360deg); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }

        // Initialize Application
        async function init() {
            try {
                console.log('üöÄ Starting initialization...');
                showLoading(true);
                
                console.log('‚úÖ Adding visual effects...');
                // Add visual effects
                addParticleCSS();
                createParticles();
                
                console.log('üìù Loading languages...');
                await loadLanguages();
                console.log('‚úÖ Languages loaded');
                
                console.log('üìö Loading subjects...');
                await loadSubjects();
                console.log('‚úÖ Subjects loaded');
                
                console.log('üåê Updating UI language...');
                // Initialize language UI
                updateUILanguage();
                console.log('‚úÖ UI language updated');
                
                console.log('üéâ Initialization complete! Showing form...');
                showLoading(false);
                showRegistrationForm();
                console.log('‚úÖ Registration form displayed');
            } catch (error) {
                console.error('‚ùå Initialization error:', error);
                console.error('Error details:', error.message);
                console.error('Stack:', error.stack);
                showError('Failed to load exam system. Please check your connection.');
            }
        }

        // UI Functions
        function showLoading(show) {
            document.getElementById('loadingState').classList.toggle('hidden', !show);
        }

        function showRegistrationForm() {
            document.getElementById('registrationForm').classList.remove('hidden');
            document.getElementById('examContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'none';
        }

        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            setTimeout(() => errorDiv.classList.add('hidden'), 5000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.classList.remove('hidden');
            setTimeout(() => successDiv.classList.add('hidden'), 3000);
        }

        // API Functions
        async function apiCall(endpoint, options = {}) {
            const response = await fetch(API_BASE + endpoint, {
                headers: {
                    'Content-Type': 'application/json',
                    ...options.headers
                },
                ...options
            });

            if (!response.ok) {
                const error = await response.json().catch(() => ({}));
                throw new Error(error.error || `HTTP ${response.status}`);
            }

            return response.json();
        }

        // Subject Functions
        async function loadSubjects() {
            console.log('üìö Fetching subjects from API...');
            try {
                subjects = await apiCall('/subjects');
                console.log('‚úÖ Subjects received:', subjects.length, 'subjects');
                console.log('Subjects:', subjects);
                populateSubjectSelect();
                console.log('‚úÖ Subject dropdown populated');
            } catch (error) {
                console.error('‚ùå Failed to load subjects:', error);
                throw error;
            }
        }

        function populateSubjectSelect() {
            console.log('Populating subject select dropdown...');
            const select = document.getElementById('subjectSelect');
            if (!select) {
                console.error('‚ùå Subject select element not found!');
                return;
            }
            select.innerHTML = '<option value="">-- ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§ø‡§∑‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç --</option>';
            
            subjects.forEach(subject => {
                const option = document.createElement('option');
                option.value = subject.id;
                option.textContent = subject.name;
                select.appendChild(option);
            });
        }

        // Registration Functions
        document.getElementById('studentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('studentName').value.trim();
            const email = document.getElementById('studentEmail').value.trim();
            const mobile = document.getElementById('studentMobile').value.trim();
            const subjectId = document.getElementById('subjectSelect').value;
            
            if (!name || !email || !mobile || !subjectId) {
                showError('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§´‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç (Please fill all fields)');
                return;
            }

            if (mobile.length !== 10 || !/^\d{10}$/.test(mobile)) {
                showError('‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡•à‡§ß ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }

            try {
                const startBtn = document.getElementById('startExamBtn');
                startBtn.disabled = true;
                startBtn.textContent = 'Registering...';

                // Register student
                const registration = await apiCall('/register', {
                    method: 'POST',
                    body: JSON.stringify({ name, email, mobile, subject: subjectId })
                });

                studentId = registration.studentId;
                currentStudent = { name, email, mobile };
                currentSubject = subjects.find(s => s.id === subjectId);

                // Get exam language
                const examLanguage = document.getElementById('examLanguageSelect').value;
                
                // Load questions with selected language
                questions = await apiCall(`/questions/${subjectId}?lang=${examLanguage}`);
                
                console.log('Loaded questions:', questions);
                console.log('First question:', questions[0]);
                
                if (questions.length === 0) {
                    throw new Error('‡§á‡§∏ ‡§µ‡§ø‡§∑‡§Ø ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');
                }

                showSuccess('Registration successful! Starting exam...');
                setTimeout(() => startExam(), 1000);

            } catch (error) {
                console.error('Registration error:', error);
                showError(error.message);
            } finally {
                const startBtn = document.getElementById('startExamBtn');
                startBtn.disabled = false;
                startBtn.textContent = 'Start Exam / ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç';
            }
        });

        // Exam Functions
        function startExam() {
            // Initialize exam state
            currentQuestionIndex = 0;
            userAnswers = {};
            examStartTime = Date.now();
            
            // üé≤ Randomize questions order - har user ko alag order milega
            shuffleArray(questions);
            console.log('‚úÖ Questions randomized for this user');
            
            // Update UI
            document.getElementById('examSubject').textContent = currentSubject.name;
            document.getElementById('examStudentName').textContent = currentStudent.name;
            
            // Show exam container
            document.getElementById('registrationForm').classList.add('hidden');
            document.getElementById('examContainer').style.display = 'block';
            
            // Show fullscreen toggle button
            document.getElementById('fullscreenToggle').classList.add('show');
            
            // Start timer
            startTimer();
            
            // Show first question
            showQuestion();
        }
        
        // Fisher-Yates shuffle algorithm for random question order
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startTimer() {
            const examDurationMinutes = currentSubject.duration; // Duration in minutes from subject
            const examDurationSeconds = examDurationMinutes * 60; // Convert to seconds
            
            examTimer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - examStartTime) / 1000);
                const remaining = examDurationSeconds - elapsed;
                
                // Auto-submit when time runs out
                if (remaining <= 0) {
                    clearInterval(examTimer);
                    alert(currentLanguage === 'en' 
                        ? 'Time is up! Your exam will be submitted automatically.' 
                        : '‡§∏‡§Æ‡§Ø ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§! ‡§Ü‡§™‡§ï‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡•ç‡§µ‡§§‡§É ‡§ú‡§Æ‡§æ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§');
                    submitExam();
                    return;
                }
                
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                const timeLabel = currentLanguage === 'en' ? 'Time Remaining' : '‡§∂‡•á‡§∑ ‡§∏‡§Æ‡§Ø';
                
                // Change color when less than 5 minutes remaining
                const timerElement = document.getElementById('examTimer');
                if (remaining < 300) { // 5 minutes
                    timerElement.style.color = '#ff4444';
                    timerElement.style.fontWeight = 'bold';
                } else {
                    timerElement.style.color = '';
                    timerElement.style.fontWeight = '';
                }
                
                timerElement.textContent = 
                    `${timeLabel}: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function showQuestion() {
            console.log('showQuestion called, index:', currentQuestionIndex);
            console.log('Total questions:', questions ? questions.length : 0);
            
            if (!questions || questions.length === 0) {
                console.error('No questions available');
                document.getElementById('questionContainer').innerHTML = '<div style="padding: 40px; text-align: center; color: red;">‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç / Questions not available</div>';
                return;
            }
            
            const question = questions[currentQuestionIndex];
            console.log('Current question:', question);
            
            if (!question) {
                console.error('Question not found at index:', currentQuestionIndex);
                document.getElementById('questionContainer').innerHTML = '<div style="padding: 40px; text-align: center; color: red;">Question not found</div>';
                return;
            }
            
            const questionText = currentLanguage === 'en' ? 'Question' : '‡§™‡•ç‡§∞‡§∂‡•ç‡§®';
            const marksText = currentLanguage === 'en' ? 'Marks' : '‡§Ö‡§Ç‡§ï';
            
            // Ensure we have the question text and options
            const qText = question.question || 'Question text not available';
            const qOptions = question.options || [];
            
            console.log('Rendering - Question text:', qText);
            console.log('Rendering - Options:', qOptions);
            
            // üé¨ KBC Style: Pehle question container clear karo
            const container = document.getElementById('questionContainer');
            container.innerHTML = '';
            container.style.opacity = '0';
            
            // Small delay for smooth transition
            setTimeout(() => {
                // Check if already answered
                const alreadyAnswered = userAnswers[question.id] !== undefined;
                selectedOption = alreadyAnswered ? userAnswers[question.id] : null;
                isLocked = alreadyAnswered;
                
                const lockText = currentLanguage === 'en' ? 'Lock Answer' : '‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡•â‡§ï ‡§ï‡§∞‡•á‡§Ç';
                const lockedText = currentLanguage === 'en' ? 'Answer Locked' : '‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡•â‡§ï ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ';
                
                const html = `
                    <div class="question-number">${questionText} ${currentQuestionIndex + 1} of ${questions.length}</div>
                    <div class="question-text kbc-question-animate">${qText}</div>
                    <div class="options" id="optionsContainer">
                        ${qOptions.map((option, index) => `
                            <div class="option kbc-option-animate" 
                                 style="animation-delay: ${0.3 + (index * 0.15)}s"
                                 data-index="${index}"
                                 onclick="selectOption(${index})">
                                <input type="radio" name="question_${currentQuestionIndex}" value="${index}" 
                                       ${selectedOption === index ? 'checked' : ''}
                                       ${isLocked ? 'disabled' : ''}>
                                <span>${option}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                        <div style="color: #666;">
                            <strong>${marksText}:</strong> ${question.marks || 1}
                        </div>
                        <button id="lockBtn" 
                                class="lock-btn ${isLocked ? 'locked' : ''}" 
                                onclick="lockAnswer()"
                                ${isLocked || selectedOption === null ? 'disabled' : ''}>
                            ${isLocked ? 'üîí ' + lockedText : 'üîì ' + lockText}
                        </button>
                    </div>
                `;
                
                container.innerHTML = html;
                container.style.opacity = '1';
                container.style.transition = 'opacity 0.3s ease-in';
                
                // Add selected/correct/wrong classes to already answered option
                if (alreadyAnswered) {
                    setTimeout(() => {
                        const options = container.querySelectorAll('.option');
                        const selectedOpt = options[userAnswers[question.id]];
                        const correctIndex = question.correct;
                        
                        if (userAnswers[question.id] === correctIndex) {
                            selectedOpt?.classList.add('option-correct');
                        } else {
                            selectedOpt?.classList.add('option-wrong');
                            options[correctIndex]?.classList.add('option-correct');
                        }
                    }, 1000);
                }
                
                console.log('‚úÖ KBC animation applied successfully');
            }, 100);
            
            updateNavigation();
            updateProgress();
        }

        function selectOption(optionIndex) {
            // Don't allow selection if already locked
            if (isLocked) {
                return;
            }
            
            selectedOption = optionIndex;
            
            // Update UI with KBC style
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = (index === optionIndex);
                
                // Add KBC selected animation
                if (index === optionIndex) {
                    option.classList.add('kbc-option-selected');
                    option.classList.remove('option-wrong', 'option-correct');
                } else {
                    option.classList.remove('kbc-option-selected');
                }
            });
            
            // Enable lock button
            const lockBtn = document.getElementById('lockBtn');
            if (lockBtn) {
                lockBtn.disabled = false;
                lockBtn.style.opacity = '1';
                lockBtn.style.cursor = 'pointer';
            }
        }
        
        function lockAnswer() {
            if (isLocked || selectedOption === null) {
                return;
            }
            
            const question = questions[currentQuestionIndex];
            const correctIndex = question.correct;
            const isCorrect = selectedOption === correctIndex;
            
            // Save answer
            userAnswers[question.id] = selectedOption;
            isLocked = true;
            
            // Update lock button
            const lockBtn = document.getElementById('lockBtn');
            const lockedText = currentLanguage === 'en' ? 'Answer Locked' : '‡§â‡§§‡•ç‡§§‡§∞ ‡§≤‡•â‡§ï ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ';
            lockBtn.innerHTML = 'üîí ' + lockedText;
            lockBtn.disabled = true;
            lockBtn.classList.add('locked');
            
            // Disable all options
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                radio.disabled = true;
                option.style.cursor = 'not-allowed';
            });
            
            // 2 second pause with suspense
            setTimeout(() => {
                const selectedOpt = options[selectedOption];
                
                if (isCorrect) {
                    // ‚úÖ CORRECT ANSWER! 
                    selectedOpt.classList.remove('kbc-option-selected');
                    selectedOpt.classList.add('option-correct');
                    
                    // Show congratulations popup (popup hatne ke baad green glow hoga)
                    showPopup('correct', () => {
                        // Popup close hone ke baad correct answer ko glow karo
                        const currentOptions = document.querySelectorAll('.option');
                        if (currentOptions[selectedOption]) {
                            currentOptions[selectedOption].style.animation = 'flashGreen 1s ease-in-out 3';
                        }
                        console.log('üåü Green glow started for correct answer');
                    });
                    
                    console.log('‚úÖ Correct Answer!');
                } else {
                    // ‚ùå WRONG ANSWER
                    selectedOpt.classList.remove('kbc-option-selected');
                    selectedOpt.classList.add('option-wrong');
                    
                    console.log('‚ùå Wrong Answer! Correct index is:', correctIndex);
                    console.log('Total options:', options.length);
                    
                    // Show wrong answer popup
                    showPopup('wrong', () => {
                        // Popup close hone ke baad correct answer ko show aur glow karo
                        console.log('üí° Callback triggered! Showing correct answer...');
                        console.log('Looking for correct answer at index:', correctIndex);
                        
                        // Re-query options to ensure fresh reference
                        const freshOptions = document.querySelectorAll('#optionsContainer .option');
                        console.log('Fresh options found:', freshOptions.length);
                        
                        if (freshOptions[correctIndex]) {
                            const correctOpt = freshOptions[correctIndex];
                            console.log('‚úÖ Found correct option element');
                            
                            // Remove any existing classes
                            correctOpt.classList.remove('kbc-option-selected', 'kbc-option-animate');
                            
                            // Add correct class with !important styles
                            correctOpt.classList.add('option-correct');
                            correctOpt.style.cssText = `
                                animation: flashGreen 1s ease-in-out infinite !important;
                                background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%) !important;
                                color: white !important;
                                border: 3px solid #27ae60 !important;
                                opacity: 1 !important;
                                visibility: visible !important;
                                display: flex !important;
                            `;
                            
                            console.log('‚ú® Correct answer should be flashing GREEN now!');
                            console.log('Correct option text:', correctOpt.textContent);
                        } else {
                            console.error('‚ùå Could not find correct option at index:', correctIndex);
                        }
                    });
                    
                    console.log('‚ùå Wrong Answer popup called!');
                }
            }, 2000); // 2 second pause
        }
        
        function showPopup(type, onClose) {
            // Create overlay
            const overlay = document.createElement('div');
            overlay.className = 'kbc-popup-overlay';
            document.body.appendChild(overlay);
            
            // Create popup
            const popup = document.createElement('div');
            popup.className = `kbc-popup ${type}`;
            
            let icon, message;
            if (type === 'correct') {
                icon = 'üéâ';
                message = currentLanguage === 'en' 
                    ? '<div style="font-size: 32px; margin-bottom: 10px;">Congratulations! üéä</div><div>Absolutely Correct! üëè</div>'
                    : '<div style="font-size: 32px; margin-bottom: 10px;">‡§¨‡§ß‡§æ‡§à ‡§π‡•ã! üéä</div><div>‡§¨‡§ø‡§≤‡•ç‡§ï‡•Å‡§≤ ‡§∏‡§π‡•Ä! üëè</div>';
            } else {
                icon = 'üòî';
                message = currentLanguage === 'en'
                    ? '<div style="font-size: 32px; margin-bottom: 10px;">Oops! üò¢</div><div>Wrong Answer! Better luck next time! üí™</div>'
                    : '<div style="font-size: 32px; margin-bottom: 10px;">‡§Ö‡§´‡§º‡§∏‡•ã‡§∏! üò¢</div><div>‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞! ‡§Ö‡§ó‡§≤‡•Ä ‡§¨‡§æ‡§∞ ‡§¨‡•á‡§π‡§§‡§∞ ‡§π‡•ã‡§ó‡§æ! üí™</div>';
            }
            
            popup.innerHTML = `
                <div class="kbc-popup-icon">${icon}</div>
                <div>${message}</div>
            `;
            
            document.body.appendChild(popup);
            
            // Auto remove after animation
            setTimeout(() => {
                popup.style.animation = 'popupBounceIn 0.4s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(popup);
                    document.body.removeChild(overlay);
                    
                    // Call callback function after popup closes
                    if (onClose && typeof onClose === 'function') {
                        onClose();
                    }
                }, 400);
            }, 2500);
        }

        function updateNavigation() {
            document.getElementById('prevBtn').disabled = (currentQuestionIndex === 0);
            
            if (currentQuestionIndex === questions.length - 1) {
                document.getElementById('nextBtn').style.display = 'none';
                document.getElementById('submitBtn').style.display = 'inline-block';
            } else {
                document.getElementById('nextBtn').style.display = 'inline-block';
                document.getElementById('submitBtn').style.display = 'none';
            }
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            const questionText = currentLanguage === 'en' ? 'Question' : '‡§™‡•ç‡§∞‡§∂‡•ç‡§®';
            document.getElementById('questionCounter').textContent = 
                `${questionText} ${currentQuestionIndex + 1} of ${questions.length}`;
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                selectedOption = null;
                isLocked = false;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                selectedOption = null;
                isLocked = false;
                showQuestion();
            }
        }

        // Fullscreen Toggle Function
        function toggleFullscreen() {
            const elem = document.documentElement;
            const toggleBtn = document.getElementById('fullscreenToggle');
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');
            
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement) {
                // Enter fullscreen
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { // Safari
                    elem.webkitRequestFullscreen();
                } else if (elem.mozRequestFullScreen) { // Firefox
                    elem.mozRequestFullScreen();
                } else if (elem.msRequestFullscreen) { // IE/Edge
                    elem.msRequestFullscreen();
                }
                
                // Update button
                icon.innerHTML = '<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>';
                text.textContent = currentLanguage === 'en' ? 'Exit Full Screen' : '‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§∏‡•á ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡•á‡§Ç';
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { // Safari
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) { // Firefox
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) { // IE/Edge
                    document.msExitFullscreen();
                }
                
                // Update button
                icon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
                text.textContent = currentLanguage === 'en' ? 'Full Screen' : '‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®';
            }
        }
        
        // Listen for fullscreen changes (when user presses ESC)
        document.addEventListener('fullscreenchange', updateFullscreenButton);
        document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
        document.addEventListener('mozfullscreenchange', updateFullscreenButton);
        document.addEventListener('MSFullscreenChange', updateFullscreenButton);
        
        function updateFullscreenButton() {
            const icon = document.getElementById('fullscreenIcon');
            const text = document.getElementById('fullscreenText');
            
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement && !document.msFullscreenElement) {
                // Not in fullscreen
                icon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
                text.textContent = currentLanguage === 'en' ? 'Full Screen' : '‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§®';
            } else {
                // In fullscreen
                icon.innerHTML = '<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>';
                text.textContent = currentLanguage === 'en' ? 'Exit Full Screen' : '‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§∏‡•á ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§≤‡•á‡§Ç';
            }
        }

        async function endExam() {
            const confirmMsg = currentLanguage === 'en' 
                ? 'Are you sure you want to end the exam early?'
                : '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?';
                
            if (!confirm(confirmMsg)) {
                return;
            }

            try {
                // Clear timer
                if (examTimer) {
                    clearInterval(examTimer);
                }
                
                // Calculate exam summary
                let correctAnswers = 0;
                let wrongAnswers = 0;
                let obtainedMarks = 0;
                let totalMarks = 0;
                
                questions.forEach((question) => {
                    totalMarks += question.marks || 1;
                    const userAnswer = userAnswers[question.id];
                    
                    if (userAnswer !== undefined) {
                        if (userAnswer === question.correct) {
                            correctAnswers++;
                            obtainedMarks += question.marks || 1;
                        } else {
                            wrongAnswers++;
                        }
                    }
                });
                
                const unanswered = questions.length - correctAnswers - wrongAnswers;
                const percentage = totalMarks > 0 ? Math.round((obtainedMarks / totalMarks) * 100) : 0;
                
                // Show exam summary popup
                showExamSummaryPopup({
                    correctAnswers,
                    wrongAnswers,
                    unanswered,
                    obtainedMarks,
                    totalMarks,
                    percentage,
                    totalQuestions: questions.length
                });
                
            } catch (error) {
                console.error('End exam error:', error);
                showError('Failed to end exam properly');
            }
        }
        
        function showExamSummaryPopup(summary) {
            // Create overlay
            const overlay = document.createElement('div');
            overlay.className = 'kbc-popup-overlay';
            overlay.style.zIndex = '10000';
            document.body.appendChild(overlay);
            
            // Create popup
            const popup = document.createElement('div');
            popup.className = 'exam-summary-popup';
            popup.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 40px;
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0,0,0,0.5);
                z-index: 10001;
                min-width: 400px;
                max-width: 500px;
                animation: popupBounceIn 0.5s ease-out;
                text-align: center;
            `;
            
            const title = currentLanguage === 'en' ? 'Exam Summary' : '‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂';
            const correctText = currentLanguage === 'en' ? 'Correct' : '‡§∏‡§π‡•Ä';
            const wrongText = currentLanguage === 'en' ? 'Wrong' : '‡§ó‡§≤‡§§';
            const unansweredText = currentLanguage === 'en' ? 'Unanswered' : '‡§Ö‡§®‡•Å‡§§‡•ç‡§§‡§∞‡§ø‡§§';
            const marksText = currentLanguage === 'en' ? 'Marks Obtained' : '‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§Ö‡§Ç‡§ï';
            const percentageText = currentLanguage === 'en' ? 'Percentage' : '‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§';
            const okButtonText = currentLanguage === 'en' ? 'OK' : '‡§†‡•Ä‡§ï ‡§π‡•à';
            
            popup.innerHTML = `
                <div style="font-size: 36px; margin-bottom: 20px;">üìä</div>
                <h2 style="margin: 0 0 30px 0; font-size: 28px;">${title}</h2>
                
                <div style="background: rgba(255,255,255,0.2); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: left;">
                        <div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">‚úÖ ${correctText}</div>
                            <div style="font-size: 32px; font-weight: bold;">${summary.correctAnswers}</div>
                        </div>
                        <div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">‚ùå ${wrongText}</div>
                            <div style="font-size: 32px; font-weight: bold;">${summary.wrongAnswers}</div>
                        </div>
                        <div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">‚è≠Ô∏è ${unansweredText}</div>
                            <div style="font-size: 32px; font-weight: bold;">${summary.unanswered}</div>
                        </div>
                        <div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">üìù ${marksText}</div>
                            <div style="font-size: 32px; font-weight: bold;">${summary.obtainedMarks}/${summary.totalMarks}</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.3); padding: 20px; border-radius: 15px; margin-bottom: 25px;">
                    <div style="font-size: 16px; margin-bottom: 10px;">${percentageText}</div>
                    <div style="font-size: 48px; font-weight: bold;">${summary.percentage}%</div>
                </div>
                
                <button onclick="closeExamSummary()" style="
                    background: white;
                    color: #667eea;
                    border: none;
                    padding: 15px 50px;
                    font-size: 18px;
                    font-weight: bold;
                    border-radius: 50px;
                    cursor: pointer;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                    transition: all 0.3s;
                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    ${okButtonText}
                </button>
            `;
            
            document.body.appendChild(popup);
            
            // Make closeExamSummary globally accessible
            window.closeExamSummary = function() {
                popup.style.animation = 'popupBounceIn 0.4s ease-out reverse';
                setTimeout(() => {
                    document.body.removeChild(popup);
                    document.body.removeChild(overlay);
                    
                    // Reset all data and go back to registration
                    currentQuestionIndex = 0;
                    userAnswers = {};
                    examStartTime = null;
                    currentStudent = null;
                    currentSubject = null;
                    questions = [];
                    
                    // Hide fullscreen toggle button
                    document.getElementById('fullscreenToggle').classList.remove('show');
                    
                    // Exit fullscreen if active
                    if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
                        if (document.exitFullscreen) {
                            document.exitFullscreen();
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                        } else if (document.mozCancelFullScreen) {
                            document.mozCancelFullScreen();
                        } else if (document.msExitFullscreen) {
                            document.msExitFullscreen();
                        }
                    }
                    
                    // Show registration form
                    document.getElementById('examContainer').style.display = 'none';
                    document.getElementById('resultContainer').style.display = 'none';
                    showRegistrationForm();
                    
                    // Clear form
                    document.getElementById('studentForm').reset();
                    
                    delete window.closeExamSummary;
                }, 400);
            };
        }

        async function submitExam() {
            const confirmMsg = currentLanguage === 'en' 
                ? 'Are you sure you want to submit the exam?'
                : '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?';
                
            if (!confirm(confirmMsg)) {
                return;
            }

            try {
                clearInterval(examTimer);
                
                const timeSpent = Math.floor((Date.now() - examStartTime) / 1000);
                
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Submitting...';

                const result = await apiCall('/submit', {
                    method: 'POST',
                    body: JSON.stringify({
                        studentId,
                        subjectId: currentSubject.id,
                        answers: userAnswers,
                        timeSpent
                    })
                });

                showResults(result.result);

            } catch (error) {
                console.error('Submit error:', error);
                showError('Failed to submit exam: ' + error.message);
                
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Exam / ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç';
            }
        }

        // Results Functions
        function showResults(result) {
            document.getElementById('examContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            
            // Hide fullscreen toggle button
            document.getElementById('fullscreenToggle').classList.remove('show');
            
            // Exit fullscreen if active
            if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
            
            // Update score display
            document.getElementById('finalScore').textContent = `${result.obtainedMarks}/${result.totalMarks}`;
            document.getElementById('finalPercentage').textContent = `${result.percentage}%`;
            
            // Show detailed results
            showDetailedResults(result.details);
        }

        function showDetailedResults(details) {
            const reviewContainer = document.getElementById('answerReview');
            
            reviewContainer.innerHTML = details.map((detail, index) => {
                const statusClass = detail.isCorrect ? 'correct' : 
                                   (detail.userAnswer === 'Not Answered' ? 'unanswered' : 'incorrect');
                
                return `
                    <div class="answer-item ${statusClass}">
                        <div><strong>Q${index + 1}:</strong> ${detail.question}</div>
                        <div style="margin-top: 10px;">
                            <strong>Your Answer:</strong> ${detail.userAnswer}<br>
                            <strong>Correct Answer:</strong> ${detail.correctAnswer}<br>
                            <strong>Marks:</strong> ${detail.marks}/${detail.totalMarks}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function printResult() {
            window.print();
        }

        function restartTest() {
            if (confirm('Are you sure you want to start a new test?')) {
                location.reload();
            }
        }

        // Initialize on page load
        window.addEventListener('load', init);

        // Prevent accidental page refresh during exam
        window.addEventListener('beforeunload', function(e) {
            if (examStartTime && document.getElementById('examContainer').style.display !== 'none') {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // Initialize the application when page loads
        console.log('üé¨ Page loaded, calling init()...');
        
        // Also check if DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>

    <!-- Developer Credit Footer -->
    <div style="position: fixed; bottom: 0; left: 0; right: 0; background: rgba(0, 0, 0, 0.8); color: white; text-align: center; padding: 8px; font-size: 12px; z-index: 1000; backdrop-filter: blur(10px);">
        <span style="opacity: 0.9;">üíª Developed by <strong style="color: #667eea;">Rajeev K. Thakur</strong></span>
        <span style="margin: 0 10px; opacity: 0.5;">|</span>
        <span style="opacity: 0.7;">KYP Exam System ¬© 2025</span>
    </div>
</body>
</html>